#include "uartconfig.h"

int Uart_open(const char* port)
{
	return 1;
}

void Uart_close(int fd)
{
}

void Uart_config(int fd, int bandrate)
{
}

void Uart_485(int fd)
{
}

char dspr[1024];
int id = 0;
#define PRL 45
#define SRL 30
char p11s[]={0xff,0xff,0x04,0x01,0x01,0x00,0x0c,0x1d,0x50};
char p11r[]={0xFF,0xff,0x28,0x01,0x01,0x00,0x0C,
                   0x00,0x00,0x01,0x01,0x00,0x00,0x02,
                   0x00,0x00,0x03,0x00,0x20,0x04,0x00,
                   0x00,0x05,0x00,0x00,0x06,0x00,0x00,
                   0x07,0x00,0x04,0x08,0x88,0x88,0x09,
                   0x99,0x99,0x0A,0x00,0x00,0x0B,0x00,0x00,0x88,0x5D};
char p15s[]={0xFF,0xFF,0x04,0x01,0x05,0x00,0x07,0x1B,0x50};
char p15r[]={0xFF,0xFF,0x19,0x01,0x05,0x00,0x07,0x00,0x00,0x00,0x01,0x00,0x00,0x02,0x00,0x00,0x03,0x00,0x7F,0x04,0xFF,0xFF,0x05,0xFF,0xFF,0x06,0x00,0x00,0xC1,0x68};

char p21s[]={0xFF,0xFF,0x04,0x02,0x01,0x00,0x0C,0x59,0x50};
char p21r[]={0xFF,0xFF,0x28,0x02,0x01,0x00,0x0C,0x00,0x00,0x02,0x01,0x00,0x00,0x02,0x00,0x00,0x03,0x00,0x00,0x04,0x00,0x00,0x05,0x00,0x00,0x06,0x00,0x00,0x07,0x00,0x00,0x08,0x80,0x08,0x09,0x00,0x00,0x0A,0x00,0x00,0x0B,0x00,0x00,0x9D,0xE1};
char p25s[]={0xFF,0xFF,0x04,0x02,0x05,0x00,0x07,0x5F,0x50};
char p25r[]={0xFF,0xFF,0x19,0x02,0x05,0x00,0x07,0x00,0x00,0x00,0x01,0x00,0x00,0x02,0x00,0x00,0x03,0x68,0xEE,0x04,0xFE,0xF5,0x05,0x00,0x01,0x06,0x00,0x00,0x63,0x5A};
char p61s[]={0xFF,0xFF,0x04,0x06,0x01,0x00,0x0C,0x69,0x51};
char p61r[]={0xFF,0xFF,0x28,0x06,0x01,0x00,0x0C,0x00,0x00,0x06,0x01,0x00,0x00,0x02,0x00,0x00,0x03,0x00,0x20,0x04,0x00,0x00,0x05,0x00,0x00,0x06,0x00,0x00,0x07,0x00,0x04,0x08,0x00,0x01,0x09,0x00,0x00,0x0A,0x00,0x00,0x0B,0x00,0x00,0x30,0x8D};
char p65s[]={0xFF,0xFF,0x04,0x06,0x05,0x00,0x07,0x6F,0x51};
char p65r[]={0xFF,0xFF,0x19,0x06,0x05,0x00,0x07,0x00,0x00,0x00,0x01,0x00,0x00,0x02,0x00,0x00,0x03,0x00,0x02,0x04,0x48,0x8C,0x05,0xFF,0xFF,0x06,0x00,0x00,0x2B,0x59};
char dtus[]={0xFF,0xFF,0xB0,0x10,0x5C,0x95,0xDA,0xDD,0x00,0x00,0x01,0x01,0x00,0x00,0x02,0x00,0x00,0x03,0x00,0x20,0x04,0x00,0x00,0x05,0x00,0x00,0x06,0x00,0x00,0x07,0x00,0x04,0x08,0x88,0x88,0x09,0x99,0x99,0x0A,0x00,0x00,0x0B,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x02,0x00,0x00,0x03,0x00,0x7F,0x04,0xFF,0xFF,0x05,0xFF,0xFF,0x06,0x00,0x00,0x00,0x00,0x02,0x01,0x00,0x00,0x02,0x00,0x00,0x03,0x00,0x00,0x04,0x00,0x00,0x05,0x00,0x00,0x06,0x00,0x00,0x07,0x00,0x00,0x08,0x80,0x08,0x09,0x00,0x00,0x0A,0x00,0x00,0x0B,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x02,0x00,0x00,0x03,0x68,0xEE,0x04,0xFE,0xF5,0x05,0x00,0x01,0x06,0x00,0x00,0x00,0x00,0x06,0x01,0x00,0x00,0x02,0x00,0x00,0x03,0x00,0x20,0x04,0x00,0x00,0x05,0x00,0x00,0x06,0x00,0x00,0x07,0x00,0x04,0x08,0x00,0x01,0x09,0x00,0x00,0x0A,0x00,0x00,0x0B,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x02,0x00,0x00,0x03,0x00,0x02,0x04,0x48,0x8C,0x05,0xFF,0xFF,0x06,0x00,0x00,0xC2,0x01};
char dtur[]={0xff,0xff,0x06,0x10,0x00,0x5c,0x90,0xa4,0x0d,0x78,0x8d};  
char inisec[]={0xFF,0xFF,0x01,0x10,0x8C,0xBE};

int Uart_send(int fd, char *buf_send, int buf_len, char *log)
{
    memset(dspr,0,1024);
    id = 0;

    if(memcmp(buf_send,p11s,9) == 0)
    { id = 1; memcpy(dspr,p11r,45); return 9; }
    if(memcmp(buf_send,p15s,9) == 0)
    { id = 1; memcpy(dspr,p15r,30); return 9;}
    if(memcmp(buf_send,p21s,9) == 0)
    { id = 2; memcpy(dspr,p21r,45); return 9;}
    if(memcmp(buf_send,p25s,9) == 0)
    { id = 2; memcpy(dspr,p25r,30); return 9;}
    if(memcmp(buf_send,p61s,9) == 0)
    { id = 6; memcpy(dspr,p61r,45);  return 9;}
    if(memcmp(buf_send,p65s,9) == 0)
    { id = 6; memcpy(dspr,p65r,30); return 9;}
    if(memcmp(buf_send,inisec,6) == 0 )
    { id = 128; memcpy(dspr,dtur,11); return 6; }
    if(memcmp(buf_send,dtus,181) == 0 )
    { id = 128; memcpy(dspr,dtur,11); return 181; }
    return -1;
}

int Uart_read(int fd, char *b, int buf_len, char *log)
{
	//char r[] = {0xff,0xff,0x07,0x01,0x01,0x08,0x01,0x08,0x88,0x88,0x88,0x0D};
    /*
    */
//	char r[] = {0xff,0xff,0x07,0x01,0x01,0x08,0x01,0x08,0x88,0x88,0x88,0x0D};
    if(id != 0)
    {
        memcpy(b, dspr, buf_len);
        return buf_len;
    }else {
        return -1;
}
}


/*
	unsigned char data_send_4[]={0xff,0xff,0x09,0x01,0x04,0x02,0x08,0x88,0x88,0x09,0x99,0x99,0x9C,0x95};				// 命令编号04
	unsigned char data_send_5[]={0xff,0xff,0x04,0x01,0x05,0x02,0x02,0x78,0x91};		// 命令编号05
	unsigned char data_send_6[]={0xff,0xff,0x09,0x01,0x06,0x02,0x04,0x00,0x44,0x06,0x00,0x66,0xD5,0xD1};				// 命令编号06
	unsigned char* data_send_buf[] = { data_send_1, data_send_4, data_send_5, data_send_6};
*/
